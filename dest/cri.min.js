!function(a){function b(){}a.cri={},b.extend=function(a){var b=function(a){function b(){}return b.prototype=a,new b}(this.prototype);return b.constructor=a,a.prototype=b,a.extend=this.extend,a},cri.Class=b,cri.getFormValue=function(a){var b={},c=":input:not(:button,[type=submit],[type=reset],[disabled])",d="select";return $(c,a).each(function(){this.name&&(b[this.name]=$(this).val())}),$(d,a).each(function(){var a=$(this).attr("data-role");a&&"selectBox"==a?this.name&&(b[this.name]=$(this).data("selectBox").value()):this.name&&(b[this.name]=$(this).val())}),b},cri.setFormValue=function(a,b){for(var c in b){var d=$("[name="+c+"]",a);if(d.length)switch(d.attr("data-role")){case"input":d.data("input").value(b[c]);break;case"timeInput":d.data("timeInput").value(b[c]);break;case"selectBox":d.data("selectBox").value(b[c]);break;default:d.val(b[c])}}},cri.isLeapYear=function(a){return 0==a%4&&(a%100!=0||a%400==0)},cri.formatDate=function(a,b){var c=b||"yyyy-MM-dd",d=a.getFullYear(),e=a.getMonth()+1,f=a.getDate(),g=a.getHours(),h=a.getMinutes(),i=a.getSeconds();return c=c.replace(/yyyy|YYYY/,d),c=c.replace(/yy|YY/,d%100>9?(d%100).toString():"0"+d%100),c=c.replace(/MM/,e>9?e.toString():"0"+e),c=c.replace(/M/g,e),c=c.replace(/dd|DD/,f>9?f.toString():"0"+f),c=c.replace(/d|D/g,f),c=c.replace(/hh|HH/,g>9?g.toString():"0"+g),c=c.replace(/h|H/g,g),c=c.replace(/mm/,h>9?h.toString():"0"+h),c=c.replace(/m/g,h),c=c.replace(/ss|SS/,i>9?i.toString():"0"+i),c=c.replace(/s|S/g,i)},cri.date2Array=function(a){return[a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()]},cri.date2Json=function(a){return{yyyy:a.getFullYear(),MM:a.getMonth(),dd:a.getDate(),HH:a.getHours(),mm:a.getMinutes(),ss:a.getSeconds(),ww:a.getDay()}},cri.string2Date=function(a){return new Date(Date.parse(a.replace(/-/g,"/")))},cri.parseJSON=function(a){return a?new Function("return "+a)():{}},cri.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},cri.isNum=function(a){return null!=a&&""!=a?!isNaN(a):!1},cri.isPhoneNo=function(a){return/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/.test(a)},!function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var c=this.length>>>0;for(b=+b||0,Math.abs(b)===1/0&&(b=0),0>b&&(b+=c,0>b&&(b=0));c>b;b++)if(this[b]===a)return b;return-1}),JSON||(a.JSON={parse:function(a){return cri.parseJSON(a)},stringify:function(a){return a.toSource()}})}(),!function(a){$.fn._getHeightPixelValue=function(a){var b=$(this),c=b[0].style.height,d=b[0].height,e=a||c||d;if(e){if(/\d*%/.test(e)){var f=b.parent();return f.is(":visible")&&"0px"!=f.css("height")?Math.floor(b.parent().height()*parseInt(e)/100):null}return parseInt(e)}return null},$.fn._getWidthPixelValue=function(a){var b=$(this),c=b[0].style.width,d=b[0].width,e=a||c||d;if(e){if(/\d*%/.test(e)){var f=b.parent();return f.is(":visible")&&"0px"!=f.css("width")?Math.floor(b.parent().width()*parseInt(e)/100):null}return parseInt(e)}return null},$.fn.formValue=function(a){return arguments.length>0?void cri.setFormValue($(this),a):cri.getFormValue($(this))},$.fn.formReset=function(a){var b=$(this),c=":input:not(:button,[type=submit],[type=reset],[disabled])",d="select";a=a||{},$(c,b).each(function(){var b=$(this).attr("data-role"),c=this.name?a[this.name]:"";c=c||"",b?"input"==b?$(this).data("input").value(c):"timeInput"==b&&(c=c||new Date,$(this).data("timeInput").value(c)):$(this).val(c)}),$(d,b).each(function(){var b=$(this).attr("data-role"),c=this.name?a[this.name]:"";c=c||"",b&&"selectBox"==b?""!=c?$(this).data("selectBox").value(c):$(this).data("selectBox").select(0):""!=c?$(this).val(c):this.selectedIndex=0})}}(jQuery)}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d=b.Class.extend(function(a,b){this.$element=c(a),this._initOptions(b),this._init(),this._eventListen()});d.prototype._initOptions=function(a){this.options=c.extend(!0,{},this.options,a)},d.prototype._init=function(){},d.prototype._eventListen=function(){},d.prototype._destroy=function(){var a=this.$element,b=a.parent();b.after(a).remove()},d.prototype._getHeightPixelValue=function(a,b){var c=a[0].style.height,d=a[0].height,e=b||c||d;if(!e)return null;var f=(""+e).split("%");if(f.length>1){var g=a.parent();if(!g.is(":visible")||!g.style.height)return null;e=Math.floor(a.parent().height()*f[0]/100),e=(""+e).split("px")[0]}return e?parseInt(e):void 0},b.Widgets=d}(window),!function(){"use strict";function a(a){return a=(""+a).replace(/(<.*?>)|(<\/.*?>)/g,"")}function b(a,b){var e=b||function(){var b=[];return d("tr th,td",a).each(function(){var a="{"+d(this).data("options")+"}";b.push(d.extend({title:d(this).html()},c.parseJSON(a)))}),b}();return d.map(e,function(a){return a.title&&a.width&&(a._width=a.width),a}),e}var c=window.cri,d=window.jQuery,e=41,f=40,g=50,h=41,i=5,j={title:null,height:null,width:null,toolbar:null,url:null,param:{},checkBox:!1,rowNum:!0,columns:null,pagination:!0,page:1,pageSize:10,filter:!1,onChange:null,onSelected:null,onDblClick:null,onLoad:null,ajaxDone:null},k=c.Widgets.extend(function(a,b){this.options=j,this.$element=d(a),this.$grid=null,this.$gridhead=null,this.$gridbody=null,this.toolbar=null,this.pager=null,this.$title=null,this._rows=null,this._columns=[],this._selectedId=[],this._gridClassName=this._gridClassName||"datagrid",c.Widgets.apply(this,arguments)});d.extend(k.prototype,{_eventListen:function(){var a=this,b=this.options,c=0,e=null;this.$gridbody.on("scroll",function(){d(".grid-head-wrap",a.$gridhead).scrollLeft(d(this).scrollLeft())}).on("click","tr",function(b){null!=e&&clearTimeout(e),e=window.setTimeout(function(){d("input[type=checkbox]",a.$gridhead).prop("checked",!1),a._setSelected(b);var c=d(b.target).closest("tr"),e=c.data("rowid"),f=a._getRowDataById(e);a.options.onChange&&a.options.onChange.call(a,f)},300)}).on("dblclick","tr",function(a){clearTimeout(e)}),d(document).on("mouseup",function(b){a.$gridhead.css("cursor",""),d(document).off("mousemove")}),this.$gridhead.on("mousedown",".drag-line",function(e){a.$gridhead.css("cursor","e-resize");var f=0;b.rowNum&&f++,b.checkBox&&f++,f+=d(this).data("drag");var g=d("col:eq("+f+")",a.$gridhead);c=e.pageX,d(document).on("mousemove",function(b){var e=b.pageX-c,h=+g.width()+e,j=d("table",a.$gridhead).width();c=b.pageX,h>=i&&(d("table",a.$gridbody).width(j+e),d("table",a.$gridhead).width(j+e),d("col:eq("+f+")",a.$gridhead).width(h),d("col:eq("+f+")",a.$gridbody).width(h))})}).on("click","input[type=checkbox]",function(c){var e=d(c.target).prop("checked");e?(a._selectedId=[],d("tr",a.$gridbody).each(function(){var b=d(this);a._selectedId.push(b.data("rowid")),b.addClass("selected"),d("input[type=checkbox]",b).prop("checked",e)})):(a._selectedId=[],d("tr",a.$gridbody).removeClass("selected")),d("input[type=checkbox]",a.$gridbody).each(function(){d(this).prop("checked",e)}),b.onChange&&b.onChange.call(a)})},_init:function(){this._columns=b(this.$element,this.options.columns),this._createGrid(),this._createPage(),this._getData(),this.options.onLoad&&"function"==typeof this.options.onLoad&&this.options.onLoad.call(this)},_createGrid:function(){var a=this.$element._getHeightPixelValue(this.options.height),b=this.$element._getWidthPixelValue(this.options.width),c=d("<div></div>").addClass("grid").addClass(this._gridClassName).addClass("panel panel-default");c.attr("style",this.$element.attr("style")).css({width:b,height:a,display:"block"}),this.$element.wrap(c),this.$element.hide(),this.$grid=this.$element.parent(),this._createTitle(this.$grid),this._createToolbar(this.$grid),this._createGridView(this.$grid,a)},_createGridView:function(a,b){this.$gridview=d("<div></div>").addClass("grid-view"),this.$gridhead=d("<div></div>").addClass("grid-head"),a.append(this.$gridview.append(this.$gridhead).append(this.$gridbody)),b&&(b-=h,this.options.title&&(b-=e),this.options.toolbar&&(b-=f),this.options.pagination&&(b-=g)),this._createHead(this.$gridhead),this.$gridbody=this._createBody(b),this.$grid.append(this.$gridbody)},_createTitle:function(a){this.options.title&&(this.$title=d('<div class="panel-heading"><span>'+this.options.title+"</span></div>"),a.append(this.$title))},_createHead:function(a){var b=d("<div></div>").addClass("grid-head-wrap"),c=d('<table class="table table-bordered"></table>'),e=d("<tr></tr>"),f=this.options,g=this._columns;if(c.append(this._createColGroup(a.width())),f.checkBox){var h=d("<td></td>").addClass("line-checkbox").append('<span class="td-content"><input type="checkbox"/></span>');e.append(h)}if(f.rowNum){var i=d("<td></td>").addClass("line-number").append('<div class="td-content"></div>');e.append(i)}for(var j=0,k=g.length;k>j;j++){var l=this,m=d("<td></td>"),n=d("<div></div>").addClass("drag-line").data("drag",j),o=d("<div></div>").addClass("td-content grid-header-text"),p=g[j];for(var q in p){var r=p[q];if("title"==q){if(o.prop("title",r).append(r),f.filter){var s=d('<span data-for="'+p.field+'" class="fa fa-filter filter-icon"></span>');s.click(function(a){var b=l.$grid.offset(),c=d(this).offset(),e={left:c.left-b.left+10,top:c.top-b.top},f=d(a.target).data("for");l._toggle(l.$grid.find("ul[data-for="+f+"]"),e)}),o.append(s)}}else"style"==q&&m.css(r)}m.append(o),k-1>j&&m.append(n),e.append(m)}c.append(e),a.html(b.html(c))},_createBody:function(a){var b=d('<div class="grid-body loading"></div>'),c=d('<i class="fa fa-spinner fa-pulse fa-spin"></i>').addClass("loadingIcon");return a&&b.height(a),b.append(c),b},_refreshBody:function(a){var b=this,e=d('<table class="table table-striped table-hover table-bordered"></table>'),f=this.options,g=0,h=1+f.pageSize*(f.page-1),i=this._columns;a=a||this._rows,this._selectedId=[],e.append(d("colgroup",this.$gridhead).clone());for(var j=0,k=a.length;k>j;j++){var l=a[j],m=d("<tr></tr>").data("rowid",g);if(f.checkBox){var n=d('<td class="line-checkbox"></td>');l.check?(m.append(n.append('<input type="checkbox" checked/>')),this._selectedId.push(g)):m.append(n.append('<input type="checkbox"/>'))}f.rowNum&&m.append(d("<td></td>").addClass("line-number").append(h));for(var o=0,p=i.length;p>o;o++){var q=d("<td></td>"),r=d("<div></div>").addClass("td-content"),s=i[o],t=null==l[s.field]?"":l[s.field],u=(""+t).replace(/(<([^a\/]).*?>)|(<\/[^a].*?>)/g,""),v=s.button;if(v){c.isArray(v)||(v=[v]);var w=v.map(function(a){var c=d('<button class="btn btn-sm"></button>');return c.btn({text:a.text,iconCls:a.iconCls,handler:function(c){return function(){a.handler&&a.handler(b._getRowDataById(c))}}(g)}),c});r.append(w)}else r.prop("title",u).append(u);m.append(q.append(r))}h++,g++,e.append(m)}this.$gridbody.removeClass("loading").html(e);var x=this.$grid.clone();x.css({position:"fixed",left:"-10000px"}),d("body").append(x);var y=x.find(".grid-body").prop("clientWidth");if(y){var z=x.find(".grid-body").width()-y;this.$gridhead.parent().css({paddingRight:z})}x.remove()},_createColGroup:function(a){var b=[],c=this.options,e=this._columns;c.checkBox&&b.push(d("<col/>").css("width",30)),c.rowNum&&b.push(d("<col/>").css("width",30));for(var f=0,g=e.length;g>f;f++){var h=d("<col/>");e[f]._width&&h.width(e[f]._width),b.push(h)}return d("<colgroup></colgroup>").append(b)},_createToolbar:function(a){this.options.toolbar&&(this.toolbar=new c.ToolBar(a,{buttons:this.options.toolbar}))},_initFilter:function(){var a=this._rows,b=this._columns,c={};this._filters=this._filters||{};for(var d in b){for(var e=b[d].field,f={},g=0,h=a.length;h>g;g++){var i=a[g],j=i[e];void 0==f[j]&&(f[j]=!0)}c[e]=f}this._createFilterLists(c)},_createFilterLists:function(b){var c=this;for(var e in b){var f=this.$grid.offset(),g=this.$gridhead.find("span[data-for="+e+"].filter-icon").offset(),h={left:g.left-f.left+10,top:g.top-f.top},i=c.$grid.find("ul[data-for="+e+"]");i.length?i.empty():i=d('<ul class="grid-filter" data-for="'+e+'"></ul>');var j=d('<input type="checkbox" name="all"/>').click(function(a){var b=d(a.target).closest("ul");d(a.target).prop("checked")?b.find("input[type=checkbox]").prop("checked",!0):b.find("input[type=checkbox]").prop("checked",!1)});i.append(d("<li></li>").append(j,"全部"));var k=b[e];for(var l in k){var m=a(l);"null"==m&&(m="");var n=d('<input type="checkbox" name="'+m+'"/>').data("value",l);i.append(d('<li class="filter-value"></li>').append(n,m))}var o=d('<li class="footer"><button class="cancel">过滤</button></li>');i.append(o),i.css(h),o.find("button").button({handler:function(a){return function(){var b=a.attr("data-for"),e=[];a.find("li.filter-value input[type=checkbox]").each(function(){d(this).prop("checked")&&e.push(d(this).data("value"))}),c._filters[b]=e,c._filter(),c._toggle(a)}}(i)}),this.$grid.append(i),i.find("li.filter-value input[type=checkbox]").click(function(a){return function(){a.prop("checked",!1)}}(j))}},_toggle:function(a,b){a.is(":hidden")?a.css(b).slideDown(200,function(){d(document).mouseup(function(b){var c=a;c.is(b.target)||0!==c.has(b.target).length||a.slideUp(200)})}):a.slideUp(200)},_filter:function(){var a=this._filters,b=this._rows;for(var c in a){for(var d=a[c],e=[],f=0,g=d.length;g>f;f++)for(var h=d[f],i=0,j=b.length;j>i;i++)""+b[i][c]==h&&e.push(b[i]);b=e}this._refreshBody(b)},_createPage:function(){var a=this.options,b=this;this.options.pagination&&(this.$pager=d('<div class="panel-footer"></div>'),this.pager=new c.Pager(this.$pager,{page:a.page,pageSize:a.pageSize,total:0,rowsLen:0,onPage:function(c,d){a.page=c,a.pageSize=d,b._getData()}}),this.$grid.append(this.$pager))},_getData:function(){var a=!0,b=this.options,c=this;return b.pagination&&(b.param.page=b.page,b.param.rows=b.pageSize),this.options.url&&d.ajax({type:"post",url:this.options.url,success:function(a){if(b.ajaxDone){var e=b.ajaxDone.call(c,a);e&&(a=e)}c._rows=a.rows||[],b.total=a.total||0,c.pager&&c.pager.update(b.page,b.pageSize,b.total,c._rows.length),d("input[type=checkbox]",c.$gridhead).prop("checked",!1),c._refreshBody(),b.filter&&c._initFilter()},error:function(){c._rows=[],b.total=0,c.pager&&c.pager.update(b.page,b.pageSize,b.total,c._rows.length),c._refreshBody()},data:b.param,dataType:"JSON",async:!1}),a},_setSelected:function(a){var b=this,c=d(a.target).closest("tr"),e=c.data("rowid");if(this.options.checkBox){var f=c.find("input:checkbox"),g=f.prop("checked"),h=[];d(a.target).is("input:checkbox")||f.prop("checked",!g),this.$gridbody.find("tr").each(function(){var a=d(this);d(this).find("input:checkbox").prop("checked")&&h.push(a.data("rowid")),b._selectedId=h})}else c.hasClass("selected")?(c.removeClass("selected"),this._selectedId=[]):(d("tr.selected",this.$gridbody).removeClass("selected"),c.addClass("selected"),this._selectedId=[e]);this._selectedId&&this._selectedId.length&&this.options.onSelected&&this.options.onSelected.call(this)},_colsWidth:function(){var a=this;d("tr:eq(0) td",this.$gridhead).each(function(b){d("col:eq("+b+")",a.$gridbody).width(d(this).width()+8),d("col:eq("+b+")",a.$gridhead).width(d(this).width()+8)})},_getRowDataById:function(a){return this._rows[parseInt(a)]},_onDblClickRow:function(a){var b=this,c=this.options,e=d(a.target).closest("tr"),f=e.data("rowid");this._selectedId=[f],d("tr.selected",this.$gridbody).removeClass("selected"),e.addClass("selected"),this.options.checkBox&&(d("input[type=checkbox]",this.$gridbody).prop("checked",!1),d("input[type=checkbox]",e).prop("checked",!0)),c.onDblClick&&c.onDblClick.call(b,b._getRowDataById(f))},reload:function(a){a&&(this.options.param=a),this.options.page=1,this._selectedId=[],this._getData()},loadData:function(a){c.isArray(a)&&(this._rows=a,this._refreshBody(),this.options.filter&&this._initFilter())},getSelected:function(){for(var a=[],b=this._selectedId,c=0;c<b.length;c++)a.push(this._getRowDataById(b[c]));return a}}),c.Grid=k}(),!function(a){"use strict";var b=a.cri,c=a.jQuery,d={text:"",iconCls:null,handler:null,enable:!0},e="btn",f=b.Widgets.extend(function(a,c){this.options=d,this.$inputGroup=null,this.$button=null,b.Widgets.apply(this,arguments),this.$element.attr("data-role","button")});c.extend(f.prototype,{_eventListen:function(){var a=this;this.$button.on("click",function(){a.options.enable&&a.options.handler&&a.options.handler.call()})},_init:function(){this._create()},_reInit:function(a){this.options=c.extend(this.options,a),this.text(this.options.text),this.iconCls(this.options.iconCls),this.options.enable?this.enable():this.disable()},_create:function(){var a=this.options,b=a.iconCls||"",c=this.$element,d='<span class="icon"><i class="'+b+'"></i></span>';c.addClass(e),c.prepend(d),a.text&&c.append(a.text),a.enable||this.disable(),this.$button=c},text:function(a){if(a.length){var b=this.$button.find("span.icon").clone();this.$button.empty(),b.length&&this.$button.append(b),this.$button.append(a)}},iconCls:function(a){this.$button.find("span.icon i").attr("class",a)},enable:function(){this.$button.removeClass("disabled"),this.options.enable=!0},disable:function(){this.$button.addClass("disabled"),this.options.enable=!1}}),b.Button=f,c.fn.btn=function(a){var b=null;return this.each(function(){var d=c(this),e=d.data("widget"),g="object"==typeof a&&a;return null!=e&&e instanceof f?(e._reInit(a),b=e,!1):void d.data("widget",b=new f(this,g))}),b}}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d="content-loader",e={content:null,isIframe:!1,onReady:null},f=b.Widgets.extend(function(a,c){this.options=e,b.Widgets.apply(this,arguments),this.$content.attr("data-role","content-loader")});c.extend(f.prototype,{_init:function(){this._createBody()},_createBody:function(){this.$content=c('<div class="'+d+'"></div>'),this.$element.append(this.$content),this._load()},_load:function(){var a=!0,b=this;if(this.options.content instanceof jQuery?a=!1:/^<\w+>.*/g.test(this.options.content)&&(a=!1),a)if(this.options.isIframe){var c=document.createElement("iframe"),d=+new Date;c.src=this.options.content,c.id="id_"+d,c.name="name_"+d,c.frameBorder="no",c.attachEvent?c.attachEvent("onload",function(){b.options.callback&&b.options.callback.call()}):c.onload=function(){b.options.onReady&&b.options.onReady.call()},this.$content.append(c),this.$content.css("overflow","hidden")}else this.$content.load(this.options.content,function(){b.options.onReady&&b.options.onReady.call()});else this.$content.append(this.options.content),this.options.onReady&&this.options.onReady.call()},_destroy:function(){this.$content.remove()},getContent:function(){return this.$content},show:function(){this.$content.show()},hide:function(){this.$content.hide()},reload:function(a,b){a&&(this.options.content=a),b&&(this.options.onReady=b),this._destroy(),this._createBody()}}),b.ContentLoader=f}(window),!function(a){var b=a.jQuery,c=a.cri,d=c.DataGrid=c.Grid.extend(function(a,b){c.Grid.apply(this,arguments),this.$element.attr("data-role","datagrid")});b.fn.datagrid=function(a){var c=null;return this.each(function(){var e=b(this),f=e.data("datagrid");options="object"==typeof a&&a,null!=f&&f._destroy(),e.data("datagrid",c=new d(this,options))}),c}}(window),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.dataOptions=a.extend({},a.fn.fileUpload.defaults,c),this.title="",this.$element.attr("title")&&(this.title=this.$element.attr("title")),this.dataOptions.title&&(this.title=this.dataOptions.title),this.id=this.$element.attr("id"),this.name=this.$element.attr("name"),this.init(),this.$element.attr("data-role","fileupload")};b.prototype.init=function(){var b=this;this.fileUploadObj=this.$element,this.fileUploadObj.wrap(a('<div class="eb_fileUploadGroup"></div>')),this.parent=this.fileUploadObj.parent(),this.parent.data("fileUpload",b),this.fileUploadObj.after(a('<input class="eb_fileUploadInput" name="'+b.name+'" id="eb_fileUploadInput_'+b.id+'" />')),this.inputObj=this.parent.children(".eb_fileUploadInput"),this.inputObj.data("fileUpload",b),this.inputObj.before(a('<span class="eb_title">'+b.title+"</span>")),this.titleObj=this.parent.children(".eb_title"),this.inputObj.after(a('<div class="eb_button">浏览</div>')),this.buttonObj=this.parent.children(".eb_button"),this.fileUploadObj.change(function(){var a=b.fileUploadObj.val();b.inputObj.val(a),b.parent.attr("value",a)}),this.buttonObj.click(function(){b.fileUploadObj.trigger("click"),b.fileUploadObj.get(0).focus()}).mousedown(function(){setTimeout(function(){b.inputObj.addClass("focus"),b.buttonObj.addClass("focus")},1)}),this.setWidth(),this.setHeight(),this.setStyle()},b.prototype.setValue=function(a){this.inputObj.val(a),this.fileUploadObj.val(a),this.fileUploadObjClone&&his.fileUploadObjClone.val(a),this.parent.attr("value",a)},b.prototype.getValue=function(){var a=this.fileUploadObj.val();return this.fileUploadObjClone&&(a=this.fileUploadObjClone.val()),a},b.prototype.clearValue=function(){this.setValue("")},b.prototype.initInForm=function(b){var c=this;return b.append(c.fileUploadObjClone=c.fileUploadObj.clone().css("display","none").addClass("clone")),this.fileUploadObj.click(function(){return c.fileUploadObjClone.trigger("click"),!1}),this.fileUploadObjClone.change(function(){var b=a(this).val();c.setValue(b)}),c.fileUploadObjClone},b.prototype.setWidth=function(b){var c=this,d=a.fn.fileUpload.defaults.width;if(this.dataOptions.width&&(d=this.dataOptions.width),b&&(d=b),"string"==typeof d&&(d=d.split("px")[0]),this.parent.width(d),this.inputObj.width(c.parent.width()-140),this.fileUploadObj.width(c.parent.width()-75),this.dataOptions.titleWidth||0==this.dataOptions.titleWidth){var d=this.dataOptions.titleWidth;this.titleObj.width(d),this.inputObj.width(c.parent.width()-d-67),this.fileUploadObj.width(c.parent.width()-d-2)}},b.prototype.setHeight=function(b){var c=a.fn.fileUpload.defaults.height;this.dataOptions.height&&(c=this.dataOptions.height),b&&(c=b),"string"==typeof c&&(c=c.dplit("px")[0]),this.parent.height(c),this.inputObj.height(c-2),this.inputObj.css("line-height",c-2+"px"),this.fileUploadObj.height(c),this.titleObj.height(c),this.titleObj.css("line-height",c+2+"px"),this.buttonObj.height(c),this.buttonObj.css("line-height",c+"px")},b.prototype.setStyle=function(){var b=this;this.buttonObj.mouseover(function(){a(this).addClass("mouseover")}).mouseout(function(){a(this).removeClass("mouseover")}).mousedown(function(){a(this).addClass("mousedown")}).mouseup(function(){a(this).removeClass("mousedown")}),this.fileUploadObj.focus(function(){b.inputObj.addClass("focus"),b.buttonObj.addClass("focus")}).blur(function(){b.inputObj.removeClass("focus"),b.buttonObj.removeClass("focus")})},a.fn.fileUpload=function(c,d){var e=null,f=this.each(function(){var f=a(this),g=f.data("fileUpload"),h="object"==typeof c&&c;"string"==typeof c?e=g[c](d):f.data("fileUpload",g=new b(this,h))});return"string"==typeof c?e:f},a.fn.fileUpload.defaults={width:250,height:20},a(window).on("load",function(){a(".eb_fileUpload").not(".clone").each(function(){var b=a(this),c=b.data("options");c?b.fileUpload(new Function("return {"+c+"}")()):b.fileUpload(a.fn.fileUpload.defaults)})})}(window.jQuery),!function(a){"use strict";var b=a.cri,c=a.jQuery,d={label:null,value:null,button:null,readonly:!1,onFocus:null,onBlur:null,enable:!0,required:!1},e="form-group",f="input:not(:button,[type=submit],[type=reset],[disabled])",g=b.Widgets.extend(function(a,c){this.options=d,this.$inputGroup=null,this.button=null,b.Widgets.apply(this,arguments),this.$element.data("role","input")});c.extend(g.prototype,{_eventListen:function(){var a=this;this.$element.is(f)?this.$element.on("focus",function(){a.options.onFocus&&a.options.onFocus.call(a)}).blur(function(){a.options.onBlur&&a.options.onBlur.call(a)}):this.$element.is("select")&&this.$input.click(function(){a.options.onFocus&&a.options.onFocus.call(a)})},_init:function(){var a=this.options,b=this.$element.val();null==a.value&&null!=b&&(a.value=b),this._createInputGroup(),null!=a.value&&this._setValue(a.value)},_createInputGroup:function(){var a=this.$element;a.wrap('<div class="'+e+'"></div>'),this.$inputGroup=a.parent(),this._wrapInput(),this._label(),this.options.enable||this.disable()},_wrapInput:function(){var a=this,b=a.options,d=this.$element;if(d.addClass("form-control"),b.readonly)if(d.is(f))d.prop("readonly",!0);else{var e=c('<span class="form-control-static"></span>');this.$element.after(e),d=e}if(b.button){d.wrap('<div class="input-group"></div>');var g=d.parent(),h=c('<span class="input-group-btn"></span>');g.append(h),this._button(h)}this.$input=d},_button:function(a){var d=this,e=this.options.button;b.isArray(e)||(e=[e]);var f=e.map(function(a){var b=c('<button class="btn btn-sm"></button>');return b.btn({text:a.text,iconCls:a.iconCls,handler:function(){a.handler&&a.handler.call(this,this.value())}.bind(d)}),b});this.button=a.append(f)},_label:function(){var a=this.options.label||this.$element.data("label")||this.$element.attr("title")||this.$element.attr("name")||"";this.$input;if(a=""+a,a.length){var b=c('<label class="control-label">'+a+"</label>");this.options.required&&b.addClass("required"),this.$inputGroup.prepend(b)}},_destroy:function(){var a=this.$element;this.$inputGroup.replaceWith(a)},_setValue:function(a){null!=a&&(this.$input.is(f)?(this.$input.val(a),this.$input.change()):this.$element.is("select")&&(this.$element.val(a),this.$input.text(this.$element.find("option:selected").text())))},_getValue:function(){return this.$element.val()},_showValidateMsg:function(a){this.$inputGroup.addClass("has-error"),this.$errorMsg?this.$errorMsg.text(a):(this.$errorMsg=c('<span class="help-block">'+a+"</span>"),this.$input.after(this.$errorMsg)),this.$errorMsg.show()},_hideValidateMsg:function(){this.$inputGroup.removeClass("has-error"),this.$errorMsg&&this.$errorMsg.hide()},disable:function(){this.$element.prop("disabled",!0)},enable:function(){this.$element.prop("disabled",!1)},value:function(a){return arguments.length>0?void this._setValue(a):this._getValue()}}),b.Input=g,c.fn.input=function(a){var d=null;return this.each(function(){var e=c(this),f="object"==typeof a&&a;e.attr("role");if(d=e.data("widget"),null!=d)if(d instanceof g)d._destroy();else if(d instanceof b.TimeInput)return void(d=null);e.data("widget",d=new g(this,f))}),d}}(window),!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.marquee.defaults,c),this.$element=a(b),this.scrollInterval=null,this.contentInterval=null,this.$one=null,this.$two=null,this.ita=0,this.init()};b.prototype={eventListen:function(){var a=this;this.$element.on("mouseenter",function(){clearInterval(a.scrollInterval)}).on("mouseleave",function(){a.start()})},init:function(){var a=this;this.ita=0,this.options.content.length>0&&(this.createEle(),this.contentInterval=window.setInterval(function(){a.start()},3e3),this.eventListen())},createEle:function(){this.$one||this.$element.append('<div class="contentOne"></div>'),this.$two||this.$element.append('<div class="contentTwo"></div>'),this.$one=a(".contentOne",this.$element),this.$two=a(".contentTwo",this.$element),this.options.content&&(this.$one.html("<span>"+this.options.content[0].text+"</span>"),this.$two.html("<span>"+this.options.content[0].text+"</span>"))},start:function(){this.ita++,this.ita>=this.options.content.length&&(this.ita=0),this.$two.html("<span>"+this.options.content[this.ita].text+"</span>"),this.$element.scrollTop(0),clearInterval(this.scrollInterval);var a=this;this.scrollInterval=window.setInterval(function(){a.scroll()},20)},stop:function(){clearInterval(this.contentInterval)},scroll:function(){this.$element.scrollTop(this.$element.scrollTop()+1),this.$element.scrollTop%20==20&&clearInterval(this.scrollInterval)},refreshContent:function(a){this.options.content=a,this.init()}},a.fn.marquee=function(c,d){var e=null,f=this.each(function(){var f=a(this),g=f.data("marquee"),h="object"==typeof c&&c;"string"==typeof c?e=g[c](d):f.data("marquee",g=new b(this,h))});return"string"==typeof c?e:f},a.fn.marquee.defaults={content:[],delayTime:3e3,height:20},a(window).on("load",function(){a("[class='marquee']").each(function(){var b=a(this),c=b.data("options");c&&b.marquee(new Function("return {"+c+"}")())})})}(window.jQuery),!function(a){var b=a.cri,c=a.jQuery,d=function(){};d.prototype={_notiBody:function(b,d){var e=this,f={success:"fa-exclamation",error:"fa-exclamation",warming:"fa-exclamation"};this.$notification&&this.$notification.length&&this._hide(this.$notification);var g=this.$notification=c('<div class="notification '+b+'"></div>'),h=c('<i class="icon fa '+f[b]+'"></i>'),i=c('<span class="message">'+d+"</span>"),j=c('<i class="btn fa fa-close"></i>').on("click",function(){e._hide(g)});g.append(h,i,j),c("body").append(g),e._show(),a.setTimeout(function(){},5e3)},_hide:function(a){a.animate({height:"hide"},function(){a.remove()})},_show:function(){this.$notification.animate({height:"show"})},error:function(a){this._notiBody("error",a)},warming:function(a){this._notiBody("warming",a)},success:function(a){this._notiBody("success",a)}},b.notification=new d}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d={label:null,value:0,readonly:!1,onFocus:null,onBlur:null,enable:!0,required:!1,max:null,min:null,button:{}},e=b.Input.extend(function(a,c){this.options=d,this.$inputGroup=null,b.Widgets.apply(this,arguments),this.$element.attr("data-role","numberInput")});c.extend(e.prototype,{_eventListen:function(){var a=this,b=a.options;this.$element.on("focus",function(){b.onFocus&&b.onFocus.call(a)}).on("blur",function(){if(b.onBlur&&b.onBlur.call(a),null!=b.min){var c=a.$element.val();(""==c||c<b.min)&&a.value(a.options.min)}if(null!=a.options.max){var c=a.$element.val();(""==c||c>b.max)&&a.value(a.options.max)}}).on("change",function(){b.onChange&&b.onChange.call(a)}).on("keydown",function(a){var b=a.keyCode||a.which||a.charCode;return b>=48&&57>=b||8==b})},_button:function(a){var d=this,e=c('<a href="#" class="top"><i class="fa fa-sort-up plus-button"></i></a>'),f=c('<a href="#" class="bottom"><i class="fa fa-sort-down minus-button"></i></a>');a.addClass("btn-group-vertical"),e.click(function(){var a=d.value();b.isNum(a)?d.value(+a+1):d.value(parseInt(a,10)+1)}),f.click(function(){var a=d.value();b.isNum(a)?d.value(+a-1):d.value(parseInt(a,10)-1)}),a.append(e,f)},value:function(a){return arguments.length>0?(null!=this.options.max&&a>this.options.max&&(a=this.options.max),null!=this.options.min&&a<this.options.min&&(a=this.options.min),this._setValue(a),void 0):this._getValue()}}),b.NumberInput=e,c.fn.numberInput=function(a){var b;return this.each(function(){var d=c(this),f="object"==typeof a&&a;d.attr("role");b=d.data("widget"),null!=b&&b instanceof e&&b._destroy(),d.data("widget",b=new e(this,f))}),b}}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d={page:1,pageSize:10,total:0,onPage:null,onUpdate:null},e="first-page",f="prev-page",g="next-page",h="last-page",i="disabled",j="active",k=b.Widgets.extend(function(a,c){this.options=d,this.pager=null,b.Widgets.apply(this,arguments)});c.extend(k.prototype,{_eventListen:function(){var a=this;this.$pager.find("li").off("click"),this.$pager.find("li:not(."+i+")").on("click",function(b){var d=c(b.target).closest("li"),e=d.data("page");a._page(e)})},_init:function(){this._createPager(this.$element)},_createPager:function(a){var b=this.$pager=c("<ul></ul>").addClass("pagination"),d=this.options,i=d.pageSize||10,j=d.total||0,k=parseInt(d.page)||1,l=Math.ceil(j/i),m=c("<li></li>").addClass(e).append('<a href="#"><span class="fa fa-angle-double-left"></span></a>'),n=c("<li></li>").addClass(f).append('<a href="#"><span class="fa fa-angle-left"></span></a>'),o=c("<li></li>").addClass(g).append('<a href="#"><span class="fa fa-angle-right"></span></a>'),p=c("<li></li>").addClass(h).append('<a href="#"><span class="fa fa-angle-double-right"></span></a>');l=l>0?l:k,this._fourBtn(m,n,o,p,k,l),b.append(m,n,o,p),n.after(this._numberPage(k,l)),a.append(b)},_updatePagerBtn:function(){var a=this.options,b=a.pageSize||10,d=a.total||0,i=parseInt(a.page)||1,j=Math.ceil(d/b),k=c("."+e,this.$pager),l=c("."+f,this.$pager),m=c("."+g,this.$pager),n=c("."+h,this.$pager),o=c(".number",this.$pager);
this._fourBtn(k,l,m,n,i,j),o.remove(),l.after(this._numberPage(i,j))},_fourBtn:function(a,b,c,d,e,f){var g=e+1,h=e-1;1>=e?(a.addClass(i),b.addClass(i)):(a.removeClass(i).data("page",1),b.removeClass(i).data("page",h)),e>=f?(c.addClass(i),d.addClass(i)):(c.removeClass(i).data("page",g),d.removeClass(i).data("page",f))},_numberPage:function(a,b){var d=a>2?a-2:1,e=d+4,f=[];d=b>4&&e>b?b-4:d;for(var g=d;e>=g&&b>=g;g++){var h=c('<li class="number"></li>').data("page",g),i=c('<a href="javascript:void(0);"></a>').text(g);g!=a?h.addClass("pager-num"):h.addClass(j),f.push(h.append(i))}return f},_page:function(a){var b=this.options;b.page=a,this.options.onPage.call(this,b.page,b.pageSize)},update:function(a,b,c){var d=this.options;(void 0!==c||null!==c)&&(d.total=c),d.page=a||d.page,d.pageSize=b||d.pageSize,this._updatePagerBtn(),this._eventListen(),d.onUpdate&&d.onUpdate(this)}}),b.Pager=k}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d="selectBox-group",e="fa fa-caret-down",f="options",g="selected",h={label:"",data:null,change:null,value:null,enable:!0,multiple:!1},i=b.Widgets.extend(function(a,c){this.options=h,this.$selectBoxGroup=null,this.input=null,this.listView=null,this._value=null,this._text=null,b.Widgets.apply(this,arguments),this.$element.attr("data-role","selectBox")});c.extend(i.prototype,{_init:function(){this._create();var a=this.options.value||this.$element.val();null!=a&&this.value(a)},_create:function(){this.$element.hide(),this.options.multiple&&this.$element.attr("multiple","multiple"),this._createInput(),this.$selectBoxGroup=this.$element.parent(".form-group"),this._createListView(),this.$selectBoxGroup.addClass(d)},_createInput:function(){var a=this,c={iconCls:e,handler:function(){a.listView.toggle()}};this.input=new b.Input(this.$element,{label:a.label,readonly:!0,button:c,enable:this.options.enable,onFocus:function(){a.listView.toggle()}})},_createListView:function(){var a=this;this.listView=new j(this.$selectBoxGroup,{data:a._data(),multiple:a.options.multiple,onChange:function(b,c){a.options.multiple?(a._value=b,a._text=c,a.input.value(b)):(a._value=b[0],a._text=c,a.input.value(b[0])),a.options.change&&a.options.change.call(a)}})},_data:function(){var a=this.options.data;if(a){for(var b=[],d=0,e=a.length;e>d;d++)b.push('<option value="'+a[d].value+'">'+a[d].text+"</option>");this.$element.html(b.join(""))}else a=[],c("option",this.$element).each(function(){var b=c(this).text(),d=this.value;a.push({text:b,value:d})});return this.options.data=a,a},_setSelectOptions:function(a){var b=this.$element;if(b.is("select")){b.empty();for(var c=0,d=a.length;d>c;c++){var e=a[c];b.append('<option value="'+e.value+'">'+e.text+"</option>")}}},_getTextByValue:function(a){for(var b=this.options.data,c=0,d=b.length;d>c;c++)if(b[c].value===a)return b[c].text},_showValidateMsg:function(a){this.input&&this.input._showValidateMsg(a)},_hideValidateMsg:function(){this.input&&this.input._hideValidateMsg()},_destroy:function(){this.listView._destroy(),this.$selectBoxGroup.replaceWith(this.$element),this.input=null,this.listView=null},disable:function(){this.input.disable()},enable:function(){this.input.enable()},value:function(a){return arguments.length>0?(this.options.multiple&&!b.isArray(a)&&(a=a.split(",")),this._value=a,this.input.value(this._value),this.listView.select(this._value),this.options.change&&this.options.change.call(this),void 0):this._value},text:function(a){var c=this.options.data;if(!(arguments.length>0))return this._text;this.options.multiple&&!b.isArray(a)&&(a=a.split(",")),this._text=a,this._value=[];for(var d=0,e=c.length;e>d;d++)for(var f=0,e=a.length;e>f;f++)if(c[d].text===a[f]){this._value.push(c[d].value);break}},setOptions:function(a){this.options.data=a,this._data(),this._setSelectOptions(a),a.length&&this.value(a[0].value),this.listView._destroy(),this._createListView()},select:function(a){a=parseInt(a)||0,a>=0&&a<this.options.data.length&&this.value(this.options.data[a].value)}});var j=function(a,b){this.options=c.extend({data:[],onChange:null,multiple:!1},b),this.value=b.value||null,this.text=null,this.$options=null,this.$parent=a,this._init()};j.prototype={_init:function(){var a=this,b=this.options.data,d=this.$options=c('<ul class="list-group '+f+'"></ul>'),e="."+g;if(b)for(var h=0,i=b.length;i>h;h++)d.append(this._createOption(b[h]));d.find("li").on("click",function(){var b=c(this),f=[],h=[];if(a.options.multiple)b.toggleClass(g);else{if(b.is(e))return!1;d.find(e).removeClass(g),b.addClass(g),a.toggle()}d.find("li"+e).each(function(){h.push(this.getAttribute("data-value")),f.push(this.innerHTML)}),a.value=h,a.text=f,a._change()}),c("body").append(d)},_createOption:function(a){return c('<li class="list-group-item" data-value="'+a.value+'">'+a.text+"</li>")},_setPosition:function(){var a=this.$parent.find("label").outerWidth(),b=this.$parent.offset().left+a,c=this.$parent.offset().top+30,d=this.$parent.find(".input-group").outerWidth();this.$options.css({top:c,left:b,width:d})},_clickBlank:function(){var a=this;c(document).mouseup(function(b){var c=a.$options;c.is(b.target)||0!==c.has(b.target).length||a.$options.removeClass("open")})},_change:function(){this.options.onChange&&this.options.onChange.call(this,this.value,this.text)},select:function(a){var c=this.options.data,d=this.$options;if(a=b.isArray(a)||[a],c){d.children().removeClass(g);for(var e in a)d.find("li[data-value="+a[e]+"]").addClass(g)}},toggle:function(){var a=this;this._setPosition(),this.$options.toggleClass("open"),this.$options.is("open")&&a._clickBlank()},_destroy:function(){this.$options.remove()}},b.SelectBox=i,c.fn.selectBox=function(a){var b=null;return this.each(function(){var d=c(this),e="object"==typeof a&&a;b=d.data("selectBox"),null!=b&&b._destroy(),d.data("selectBox",b=new i(this,e))}),b}}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d="tabPage-group",e="tabPage-header",f="tabPage-header-leftBtn",g="tabPage-header-rightBtn",h="tabPage-header-tabs-wrap",i="tabPage-header-tabs",j="tabPage-header-tab",k="tabPage-header-tab-close",l=150,m={onFocus:null,onCloseTab:null},n=b.Widgets.extend(function(a,c){this.options=m,this.$tabPageGroup=null,this.$tabs=null,this._pageBodyQueue=[],b.Widgets.apply(this,arguments),this.$element.attr("data-role","tabpage")});c.extend(n.prototype,{_init:function(){this._create()},_create:function(){this.$tabPageGroup=this.$element.addClass(d);var a=[];if(this.$element.children().each(function(){a.push(c(this).detach())}),this._createHeader(),a.length>0)for(var b=0;b<a.length;b++)this.addTab(a[b],a[b].data("title")||"",a[b].data("close"))},_createHeader:function(){var a=this,b=this.$pageHeader=c('<div class="'+e+'"></div>'),d=this.$leftBtn=c('<i class="fa fa-angle-double-left '+f+'"></i>').hide(),i=this.$rightBtn=c('<i class="fa fa-angle-double-right '+g+'"></i>').hide(),j=this.$tabsWrap=c('<div class="'+h+'"></div>');d.click(function(){a._offsetL()}),i.click(function(){a._offsetR()}),b.append(d,i),b.append(j),j.append(this._createTabs()),this.$tabPageGroup.append(b)},_offsetL:function(){var a=this.$tabs.position().left,b=this.$tabs.width(),c=this.$tabsWrap.width();b+a>c&&!this.$tabs.is(":animated")&&this.$tabs.animate({left:"-=150px"},500)},_offsetR:function(){var a=this.$tabs.position().left;0>a&&!this.$tabs.is(":animated")&&this.$tabs.animate({left:"+=150px"},500)},_createTabs:function(){return this.$tabs=c('<ul class="'+i+'"></ul>'),this.$tabs},_closeTab:function(a){var b=a.data("for");void 0!=b&&null!=b&&(this._pageBodyQueue[b]._destroy(),this.options.onCloseTab&&this.options.onCloseTab&&this.options.onCloseTab.call(this,this._pageBodyQueue[b]),this._pageBodyQueue[b]=null,this._pageBodyQueue.splice(b,1),c("li:gt("+b+")",this.$tabs).each(function(){var a=+c(this).data("for");c(this).data("for",a-1)}),a.remove(),0==c(".selected",this.$tabs).length&&(b==this._pageBodyQueue.length&&(b-=1),b>=0&&this.focusTab(this._getTab(b))),this._leftRightBtn())},_leftRightBtn:function(){var a=this.$tabs,b=this._pageBodyQueue.length*l,c=this.$pageHeader.width();a.width(this._pageBodyQueue.length*l),b>c?(this.$leftBtn.show(),this.$rightBtn.show(),this.$pageHeader.addClass("shift")):(this.$leftBtn.hide(),this.$rightBtn.hide(),this.$pageHeader.removeClass("shift"))},_getTab:function(a){return c("li:eq("+a+")",this.$tabs)},addNewTab:function(a,d,e,f,g){d=d||"New Tab",(void 0==e||null==e||"null"==e)&&(e=!0);var h=this,i=this.$tabs,l=c('<li class="'+j+'">'+d+"</li>").data("for",this._pageBodyQueue.length).click(function(){h.focusTab(c(this))}),m=c('<i class="fa fa-close '+k+'"></i>').click(function(){h._closeTab(l)});e&&l.append(m),i.append(l);var n=new b.ContentLoader(this.$tabPageGroup,{content:a,isIframe:f,onReady:g});return this._pageBodyQueue.push(n),this._leftRightBtn(),this.focusTab(l),n},addTab:function(a,b,c,d,e){var f=this.getIndexByContent(a);return f>-1?(this.select(f),this.getTabBody(f)):this.addNewTab(a,b,c,d,e)},getIndexByContent:function(a){for(var b=this._pageBodyQueue,c=0,d=b.length;d>c;c++)if(a==b[c].options.content)return c;return-1},focusTab:function(a){var b=this.$tabs,d=c(".selected",b).removeClass("selected").data("for"),e=a.data("for"),f=150*e,g=150*(e+1);this.$tabs.position().left+f<0&&(this.$tabs.stop(),this.$tabs.animate({left:0-f},1e3)),this.$tabs.position().left+g>this.$tabsWrap.width()&&(this.$tabs.stop(),this.$tabs.animate({left:this.$tabsWrap.width()-g},1e3)),a.addClass("selected"),null!=d&&this._pageBodyQueue[d].hide(),this._pageBodyQueue[a.data("for")].show(),this.options.onFocus&&this.options.onFocus.call(this,a.data("for"))},closeTab:function(a){this._closeTab(this._getTab(a))},select:function(a){this.focusTab(this._getTab(a))},getTabBody:function(a){return this._pageBodyQueue[a]},getTabBodyIndex:function(a){var b=-1;return c.each(this._pageBodyQueue,function(c){return a==this?(b=c,!1):void 0}),b}}),b.TabPage=n,c.fn.tabPage=function(a){var b=null;return this.each(function(){var d=c(this),e="object"==typeof a&&a;b=d.data("tabPage"),null!=b&&b._destroy(),d.data("tabPage",b=new n(this,e))}),b}}(window),!function(a){"use strict";var b=function(b,c){var d=this;this.$element=a(b),this.dataOptions=a.extend({},a.fn.textarea.defaults,c),this.value=this.$element.val(),this.title="",this.$element.attr("title")&&(this.title=this.$element.attr("title")),this.dataOptions.title&&(this.title=this.dataOptions.title),this.id=this.$element.attr("id"),this.name=this.$element.attr("name"),this.$element.attr("placeholder")?this.placeholder=this.$element.attr("placeholder"):this.placeholder="",this.init(),this.setStyle(),this.$element.change(function(){d.check()})};b.prototype.check=function(){var a={length:0,result:!0},b=this.$element.val();return 1==this.dataOptions.required&&(b||(a.required="fail",a.result=!1,a.length++)),a},b.prototype.init=function(){var b=this;this.$element.wrap(a('<div class="eb_textareaGroup" name="'+b.name+'" value="'+b.value+'" data-options="'+b.$element.data("options")+'" id="'+b.id+'_subgroup"></div>')),this.parent=this.$element.parent(),this.parent.data("textarea",b),this.parent.prepend('<div class="eb_title">'+this.title+"</div>"),this.titleObj=this.parent.children(".eb_title"),this.textareaObj=this.$element,this.dataOptions.defaultVal&&this.textareaObj.val(b.dataOptions.defaultVal),1==this.dataOptions.required&&(this.textareaObj.attr("placeholder",b.placeholder+"（必填）"),this.parent.append('<span class="redStar">*</span>')),this.style=this.textareaObj.attr("style"),this.parent.attr("style",b.style),this.setWidth(),this.setHeight(),this.setEvent()},b.prototype.setWidth=function(){if(this.dataOptions.width){var a=this.dataOptions.width;"string"==typeof a&&(a=a.split("px")[0]),this.parent.width(a),this.textareaObj.width(a-86)}if(this.dataOptions.titleWidth||0==this.dataOptions.titleWidth){var b=this.dataOptions.titleWidth;"string"==typeof b&&(b=b.split("px")[0]);var a=this.parent.width(),c=a-b-13;this.textareaObj.width(c),this.titleObj.width(b)}},b.prototype.setValue=function(a){this.textareaObj.val(a),this.parent.attr("value",a)},b.prototype.getValue=function(){return this.textareaObj.val()},b.prototype.clearValue=function(){this.setValue("")},b.prototype.setHeight=function(){if(this.dataOptions.height){var a=this.dataOptions.height;"string"==typeof a&&(a=a.split("px")[0]),this.parent.height(a),this.textareaObj.height(a-6)}},b.prototype.setStyle=function(){var a=this;this.textareaObj.focus(function(){a.textareaObj.addClass("focus")}).blur(function(){a.textareaObj.removeClass("focus")})},b.prototype.check=function(){var a=this,b={length:0,result:!0},c=this.$element.val();return 1==this.dataOptions.required&&(c||(b.required="fail",b.result=!1,b.length++)),"numOnly"==this.dataOptions.validtype&&(this.setNumOnly()?a.value=a.getValue():(b.numOnly="fail",b.result=!1,b.length++,a.setValue(a.value))),b},b.prototype.setEvent=function(){var a=250;this.dataOptions.dblclickTimeSpan&&(a=this.dataOptions.dblclickTimeSpan);var b=this,c=null,d=null,e=null,f=!1,g=!1,h=!1;this.dataOptions.onclickHandler&&(this.dataOptions.ondblclickHandler?"string"==typeof this.dataOptions.onclickHandler?this.textareaObj.get(0).onclick=function(){f||(c=setTimeout(window[this.dataOptions.onclickHandler],a),f=!0,setTimeout(function(){f=!1},a))}:this.textareaObj.get(0).onclick=function(){f||(c=setTimeout(b.dataOptions.onclickHandler,a),f=!0,setTimeout(function(){f=!1},a))}:"string"==typeof this.dataOptions.onclickHandler?this.textareaObj.get(0).onclick=window[this.dataOptions.onclickHandler]:this.textareaObj.get(0).onclick=b.dataOptions.onclickHandler),this.dataOptions.onmousedownHandler&&(this.dataOptions.ondblclickHandler?"string"==typeof this.dataOptions.onmousedownHandler?this.textareaObj.get(0).onmousedown=function(){g||(d=setTimeout(window[this.dataOptions.onmousedownHandler],a),g=!0,setTimeout(function(){g=!1},a))}:this.textareaObj.get(0).onmousedown=function(){g||(d=setTimeout(b.dataOptions.onmousedownHandler,a),g=!0,setTimeout(function(){g=!1},a))}:"string"==typeof this.dataOptions.onmousedownHandler?this.textareaObj.get(0).onmousedown=window[this.dataOptions.onmousedownHandler]:this.textareaObj.get(0).onmousedown=b.dataOptions.onmousedownHandler),this.dataOptions.onmouseupHandler&&(this.dataOptions.ondblclickHandler?"string"==typeof this.dataOptions.onmouseupHandler?this.textareaObj.get(0).onmouseup=function(){h||(e=setTimeout(window[this.dataOptions.onmouseupHandler],a),h=!0,setTimeout(function(){h=!1},a))}:this.textareaObj.get(0).onmouseup=function(){h||(e=setTimeout(b.dataOptions.onmouseupHandler,a),h=!0,setTimeout(function(){h=!1},a))}:"string"==typeof this.dataOptions.onmouseupHandler?this.textareaObj.get(0).onmouseup=window[this.dataOptions.onmouseupHandler]:this.textareaObj.get(0).onmouseup=b.dataOptions.onmouseupHandler),this.dataOptions.ondblclickHandler&&("string"==typeof this.dataOptions.ondblclickHandler?this.textareaObj.get(0).ondblclick=function(){c&&(clearTimeout(c),c=null),d&&(clearTimeout(d),d=null),e&&(clearTimeout(e),e=null),window[b.dataOptions.ondblclickHandler]()}:this.textareaObj.get(0).ondblclick=function(){c&&(clearTimeout(c),c=null),d&&(clearTimeout(d),d=null),e&&(clearTimeout(e),e=null),b.dataOptions.ondblclickHandler()}),this.dataOptions.onfocusHandler&&("string"==typeof this.dataOptions.onfocusHandler?this.textareaObj.get(0).onfocus=window[this.dataOptions.onfocusHandler]:this.textareaObj.get(0).onfocus=this.dataOptions.onfocusHandler),this.dataOptions.onblurHandler&&("string"==typeof this.dataOptions.onblurHandler?this.textareaObj.get(0).onblur=window[this.dataOptions.onblurHandler]:this.textareaObj.get(0).onblur=this.dataOptions.onblurHandler),this.dataOptions.onkeypressHandler&&("string"==typeof this.dataOptions.onkeypressHandler?this.textareaObj.get(0).onkeypress=window[this.dataOptions.onkeypressHandler]:this.textareaObj.get(0).onkeypress=this.dataOptions.onkeypressHandler),this.dataOptions.onkeydownHandler&&("string"==typeof this.dataOptions.onkeydownHandler?this.textareaObj.get(0).onkeydown=window[this.dataOptions.onkeydownHandler]:this.textareaObj.get(0).onkeydown=this.dataOptions.onkeydownHandler),this.dataOptions.onkeyupHandler&&("string"==typeof this.dataOptions.onkeyupHandler?this.textareaObj.get(0).onkeyup=window[this.dataOptions.onkeyupHandler]:this.textareaObj.get(0).onkeyup=this.dataOptions.onkeyupHandler),this.dataOptions.onchangeHandler&&("string"==typeof this.dataOptions.onchangeHandler?this.textareaObj.get(0).onchange=window[this.dataOptions.onchangeHandler]:this.textareaObj.get(0).onchange=this.dataOptions.onchangeHandler)},a.fn.textarea=function(c,d){var e=null,f=this.each(function(){var f=a(this),g=f.data("textarea"),h="object"==typeof c&&c;"string"==typeof c?e=g[c](d):f.data("textarea",g=new b(this,h))});return"string"==typeof c?e:f},a.fn.textarea.defaults={required:!1,dblclickTimeSpan:250,width:250,height:90,titleWidth:73},a(window).on("load",function(){a(".eb_textarea").each(function(){var b=a(this),c=b.data("options");c?b.textarea(new Function("return {"+c+"}")()):b.textarea(a.fn.textarea.defaults)})})}(window.jQuery),!function(a){"use strict";function b(a){return c.isLeapYear(a)?[31,29,31,30,31,30,31,31,30,31,30,31]:[31,28,31,30,31,30,31,31,30,31,30,31]}var c=a.cri,d=a.jQuery,e="time-input-group",f="time-box",g="fa fa-table",h={value:null,format:"yyyy/MM/dd",HMS:!1,enable:!0},i=c.Widgets.extend(function(a,b){this.options=h,this.date=null,this.input=null,this.selectView=null,c.Widgets.apply(this,arguments),this.$element.attr("data-role","timeInput")});i.prototype._init=function(){this.options.format&&/hh|ss/.test(this.options.format)&&(this.options.HMS=!0),this.date=this.options.value||new Date,this.date instanceof Date||(this.date=c.string2Date(this.date)),this._wrapInput(),this.$timeInputGroup=this.$element.closest(".input-group").addClass(e),this._timeSelectView()},i.prototype._wrapInput=function(){var a=this,b=this.date,d={iconCls:g,handler:function(){a.selectView.toggle()}};this.input=new c.Input(this.$element,{readonly:!0,value:c.formatDate(b,this.options.format),button:d,enable:this.options.enable}),this.$element.click(function(){a.selectView.toggle()})},i.prototype._timeSelectView=function(){var a=this,b=this.date;this.selectView=new j(this.$timeInputGroup,{value:b,HMS:this.options.HMS,onChange:function(){a.date=this.getDate(),a.input.value(c.formatDate(a.date,a.options.format)),a.options.change&&a.options.change.call(a)}})},i.prototype._setValue=function(a){this.date=a,this.input.value(c.formatDate(a,this.options.format)),this.selectView.setDate(a)},i.prototype._destroy=function(){this.selectView._destroy(),this.$timeInputGroup.replaceWith(this.$element),this.input=null,this.selectView=null},i.prototype.disable=function(){this.input.disable()},i.prototype.enable=function(){this.input.enable()},i.prototype.getFormatValue=function(){return this.$element.val()},i.prototype.value=function(a){return void 0==a?this.date:void(a instanceof Date?this._setValue(a):this._setValue(c.string2Date(a)))},i.prototype._showValidateMsg=function(a){this.input&&this.input._showValidateMsg(a)},i.prototype._hideValidateMsg=function(){this.input&&this.input._hideValidateMsg()};var j=function(a,b){this.$parent=a,this.$timeBox=null,this.$daySelect=null,this.options=d.extend({value:new Date,HMS:!1,onChange:null},b),this.date=c.date2Json(this.options.value),this._create(a)};j.prototype={_create:function(a){var b=this.$timeBox=d('<div class="container-fluid '+f+'"></div>'),c=d('<div class="col-sm-12 col-lg-12 form-inline"></div>'),e=d('<div class="row"></div>');c.append(this._yearSelect(),this._monthSelect()),b.append(e.append(c),this._daySelect()),1==this.options.HMS&&b.append(d('<div class="row"></div>').append(this._hmsSelect())),d("body").append(b)},_yearSelect:function(){var a=this,b=this.date,c=d('<div class="year-box input-group input-group-sm"></div>'),e=d('<span class="input-group-btn"><button class="btn btn-default" type="button">-</button></span>'),f=d('<span class="input-group-btn"><button class="btn btn-default" type="button">+</button></span>'),g=d('<input class="form-control" readonly/>').val(b.yyyy+"年");return this.$year=g,e.on("click",function(){g.val(--a.date.yyyy+"年"),a._change()}),f.on("click",function(){g.val(++a.date.yyyy+"年"),a._change()}),c.append(e,g,f),c},_monthSelect:function(){var a=this,b=this.date,c=d('<div class="month-box input-group input-group-sm"></div>'),e=d('<select class="form-control">');return this.$month=e,d.each([1,2,3,4,5,6,7,8,9,10,11,12],function(a,b){10>b&&(b="0"+b),e.append('<option value="'+a+'">'+b+"</option>")}),e.val(b.MM).on("change",function(){a.date.MM=e.val(),a._refreshDaySelect(),a._change()}),c.append(e,'<span class="input-group-addon">月</span>')},_daySelect:function(){var a=this.$daySelect=d("<table></table>"),b=d('<tr class="week"></tr>'),c={Sunday:"日",Monday:"一",Tuesday:"二",Wednesday:"三",Thursday:"四",Friday:"五",Saturday:"六"},e=this;this.$day=a;for(var f in c){var g=d("<th>"+c[f]+"</th>");"Sunday"==f&&g.addClass("red"),"Saturday"==f&&g.addClass("red"),b.append(g)}for(var h=0;6>h;h++){for(var i=d('<tr class="days"></tr>'),j=0;7>j;j++){var k=d("<td></td>").on("click",function(){var b=d(this).find(".day-content").text();b&&b!=e.date.dd&&(d("td.choosed",a).removeClass("choosed"),e.date.dd=+b,d(this).addClass("choosed"),e._change())});i.append(k)}a.append(i)}return this._refreshDaySelect(),a},_refreshDaySelect:function(){var a=this.date,c=b(a.yyyy)[a.MM],e=new Date(a.yyyy,a.MM,1).getDay();d("td.choosed",this.$daySelect).removeClass("choosed"),d("tr.days td",this.$daySelect).html("");for(var f=e;c+e>f;f++){var g=f%7,h=Math.floor(f/7),i=d('tr.days:eq("'+h+'") td:eq("'+g+'")',this.$daySelect),j=f-e+1;i.append('<div class="day-content">'+j+"</div>"),j==this.date.dd&&i.addClass("choosed")}},_hmsSelect:function(){var a=this,b=d('<div class="hms-bar form-inline col-lg-12 col-sm-12"></div>'),c=d('<input class="form-control hour"/>'),e=d('<input class="form-control minute"/>'),f=d('<input class="form-control second"/>');return b.append(c),b.append(e),b.append(f),this.hour=c.numberInput({min:0,max:23,value:this.date.HH,onChange:function(){a.date.HH=this.value(),a._change()}}),c.before('<span class="input-group-addon">时</span>'),this.minute=e.numberInput({min:0,max:59,value:this.date.mm,onChange:function(){a.date.mm=this.value(),a._change()}}),e.before('<span class="input-group-addon">分</span>'),this.second=f.numberInput({min:0,max:59,value:this.date.ss,onChange:function(){a.date.ss=this.value(),a._change()}}),f.before('<span class="input-group-addon">秒</span>'),b.find(".form-group").addClass("form-group-sm"),b},_change:function(){this.options.onChange&&this.options.onChange.call(this)},_setPosition:function(){var a=this.$parent.offset().left+this.$parent.find("label").outerWidth(),b=this.$parent.offset().top+30,c=document.body.scrollHeight;this.$timeBox.removeClass("top"),b+250>c&&(b=b-30-230,this.$timeBox.addClass("top")),this.$timeBox.css({top:b,left:a})},_destroy:function(){this.$timeBox.remove()},toggle:function(){var a=this;if(this._setPosition(),this.$timeBox.is(":hidden")){var b=function(c){var e=a.$timeBox;e.is(c.target)||0!==e.has(c.target).length||(a.$timeBox.slideUp(200),d(document).off("mouseup",b))};this.$timeBox.is(".top")?(this.$timeBox.show(),d(document).on("mouseup",b)):this.$timeBox.slideDown(200,function(){d(document).on("mouseup",b)})}else this.$timeBox.is(".top")?this.$timeBox.hide():this.$timeBox.slideUp(200)},getDate:function(){var a=this.date;return new Date(a.yyyy,a.MM,a.dd,a.HH,a.mm,a.ss)},setDate:function(a){this.date=c.date2Json(a),this.$year.text(this.date.yyyy),this.$month.val(this.date.MM),this._refreshDaySelect(),this.options.HMS&&(this.hour.value(this.date.HH),this.minute.value(this.date.mm),this.second.value(this.date.ss))}},d.fn.timeInput=function(a){var b=null;return this.each(function(){var c=d(this),e="object"==typeof a&&a;b=c.data("widget"),null!=b&&b._destroy(),c.data("widget",b=new i(this,e))}),b}}(window),!function(a){"use strict";function b(a){var b=e('<i class="'+a+'"></i>');return b}function c(a){var c=e('<button class="btn btn-sm"></button>');return a.iconCls&&c.append(b(a.iconCls)),a.text&&c.append(a.text),a.handler&&c.on("click",a.handler),c}var d=a.cri,e=a.jQuery,f={buttons:[]},g="toolbar",h=d.Widgets.extend(function(a,b){this.options=f,this.$toolBar=null,d.Widgets.apply(this,arguments)});e.extend(h.prototype,{_eventListen:function(){},_init:function(){this._create(this.$element)},_create:function(a){for(var b=this.options,d=b.buttons,f=this.$toolBar=e('<div class="btn-toolbar '+g+'"></div>'),h=0,i=d.length;i>h;h++){var j=d[h];f.append(c(j))}a.append(f)}}),d.ToolBar=h}(window),!function(a){"use strict";var b=a.jQuery,c=a.cri,d=31,e=31,f=16,g={file:"icon fa fa-file",folderOpen:"icon fa fa-folder-open",folderClose:"icon fa fa-folder"},h={title:null,toolbar:null,url:null,param:null,async:!1,asyncUrl:null,page:!0,onSelected:null,onDblClick:null,onLoad:null},i=c.Tree=c.Widgets.extend(function(a,b){this.options=h,this.$tree=null,this.$treebody=null,this.selectedRow=null,this.toolbar=null,this.rows=null,this._className="tree",c.Widgets.apply(this,arguments),this.$element.attr("data-role","tree")});b.extend(i.prototype,{_init:function(){var a=this;this._getData().then(function(b){a.rows=b.rows,a._createTree(),a.options.onLoad&&"function"==typeof a.options.onLoad&&a.options.onLoad.call(a)})},_getData:function(){return b.ajax({type:"post",url:this.options.url,data:this.options.param})},_createTree:function(){var a=this,c=this.options,f=this.$element._getHeightPixelValue(c.height),g=this.$element._getWidthPixelValue(c.width),h=b("<div></div>").addClass(this._className).addClass("panel panel-default").width(g),i=this.$treeview=b("<div></div>").addClass("tree-view panel-body"),j=this.$treebody=b("<ul></ul>").addClass("tree-body");h.attr("style",this.$element.attr("style")).show().height(f),i.append(j),f&&(this.options.title&&(f-=d),this.options.toolbar&&(f-=e),this.$treeview.css("height",f)),this.$element.wrap(h),this.$element.hide(),this.$tree=this.$element.parent(),this._createTitle(this.$tree),this._createToolbar(this.$tree),this._eachNode(j,this.rows,"show",0,0),this.$tree.append(i),this.$treebody.on("click","div.li-content",function(b){return a._select(b),a._fold(b),c.onSelected&&c.onSelected.call(a,a.selectedRow),!1}).on("dblclick","div.li-content",function(b){return a._select(b),c.onDblClick&&c.onDblClick.call(a,a.selectedRow),!1})},_appendChildren:function(a,c){var d=b("<ul></ul>"),e=1e3*b(".li-content",a).data("uid"),g=+b("i",a).css("marginLeft").split("px")[0];g+=f,this._eachNode(d,c,"show",e,g),a.append(d)},_eachNode:function(a,c,d,e,h){for(var i=0,j=c.length;j>i;i++){var k=c[i],l=b("<li></li>"),m=b('<span class="li-text">'+k.text+"</span>"),n=b('<i class="'+g.file+'"></i>').css("marginLeft",h),o=b('<div class="li-content"></div>').data("uid",++e);if(this._dealNodeData(k),n.attr("class",g[k.iconType]),a.append(l.append(o.append(n,m))),"hide"==d&&l.hide(),k.hasChildren&&k.children&&k.children.length){var p=b("<ul></ul>");l.append(p),h+=f,k.state&&"close"==k.state?this._eachNode(p,k.children,"hide",1e3*e,h):this._eachNode(p,k.children,d,1e3*e,h),h-=f}}},_dealNodeData:function(a){a.iconType="file",a.children&&a.children.length>0&&(a.hasChildren=!0),a.hasChildren&&((void 0==a.state||null==a.state)&&(a.state="open"),a.state&&"open"==a.state&&a.children&&a.children.length>0?a.iconType="folderOpen":(a.state="close",a.iconType="folderClose"))},_createTitle:function(a){this.options.title&&(this.$title=b('<div class="title panel-heading"><span>'+this.options.title+"</span></div>"),a.append(this.$title))},_createToolbar:function(a){this.options.toolbar&&(this.toolbar=new c.ToolBar(a,{buttons:this.options.toolbar}))},_fold:function(a){var c=this.options,d=this,e=b(a.target).closest("div"),f=b(a.target).closest("li"),g=b("i",e);if(g.is(".fa-folder")?g.removeClass("fa-folder").addClass("fa-folder-open"):g.removeClass("fa-folder-open").addClass("fa-folder"),!d.selectedRow.children&&c.async){var h={};b.each(d.selectedRow,function(a,b){"children"!=a&&(h[a]=b)}),d.selectedRow.children||b.ajax({type:"get",url:c.asyncUrl,success:function(a){d.selectedRow.children=a.rows,d._appendChildren(f,a.rows)},data:h,dataType:"JSON",async:!1})}else this._expand(f)},_expand:function(a){var c=a.children("ul");c.length&&c.children("li").each(function(){b(this).animate({height:"toggle"},100)})},_select:function(a){var c=b(a.target).closest("div"),d=c.data("uid");this.selectedRow=this._getDataById(d)},_getDataById:function(a){var b=null;return!function(c){for(var d=[];a>=1;){var e=a%1e3;d.push(e),a=Math.floor(a/1e3)}for(var f=d.length-1;f>=0;f--){var g=d[f]-1;c[g]&&(b=c[g])&&(c=c[g].children)}}(this.rows),b},getSelected:function(){return this.selectedRow},reload:function(a){a&&(this.options.param=a),this._init()}}),b.fn.tree=function(a){var c=null;return this.each(function(){var d=b(this),e="object"==typeof a&&a;d.data("tree",c=new i(this,e))}),c}}(window),!function(a){var b=a.jQuery,c=a.cri,d=c.TreeGrid=c.Grid.extend(function(a,b){this._gridClassName="treegrid",c.Grid.apply(this,arguments),this._selfEvent(),this.$element.attr("data-role","treegrid")});d.prototype._selfEvent=function(){var a=this;this.$gridbody.on("click","tr td.line-file-icon i",function(b){a._fold(b),b.preventDefault()})},d.prototype._refreshBody=function(){function a(a,c,d,e){var f={file:"fa fa-file",folderOpen:"fa fa-folder-open",folderClose:"fa fa-folder"};b.each(c,function(c){var g=b("<td></td>"),h=null==d[this.field]?"":d[this.field];if("text"==this.field){var i=b("<i></i>").attr("class",f.file);(d.hasChildren||d.children&&d.children.length)&&("closed"==d.state?i.attr("class",f.folderClose):i.attr("class",f.folderOpen)),g.css("text-indent",e).addClass("line-file-icon").append(i).append(h)}else g.text(h);a.append(g)})}var c=this.$gridbody,d=b("<table></table>"),e=this.options,f=this._columns,g=1,h=1,i=this,j=6;d.append(this._createColGroup(c.width())),this._selectedId=[],!function l(c,k,m){for(var n=0,o=c.length;o>n;n++){var p=b("<tr></tr>").data("rowid",++m).attr("data-rowid",m),q=c[n];"show"==k||p.hide(),e.checkBox&&(q.check?(p.addClass("selected"),p.append(b("<td></td>").addClass("line-checkbox").append('<input type="checkbox" checked/>')),i._selectedId.push(m)):p.append(b("<td></td>").addClass("line-checkbox").append('<input type="checkbox"/>'))),e.rowNum&&p.append(b("<td></td>").addClass("line-number").append(g++)),a(p,f,q,h),d.append(p),q.children&&q.children.length>0&&(q.hasChildren=!0,h+=j,q.state&&"closed"==q.state?l(q.children,"hide",1e3*m):l(q.children,k,1e3*m),h-=j)}}(this._rows,"show",0),this.$gridbody.removeClass("loading").html(d),b("tr:nth-child(odd)",d).css("background","#FFF");var k=c.width()-c.prop("clientWidth");this.$gridhead.css("paddingRight",k)},d.prototype._fold=function(a){var c=this.options,d=b(a.target).closest("tr"),e=d.data("rowid"),f=this;if(this.selectedRow=this._getRowDataById(e),"closed"==this.selectedRow.state){if(this.selectedRow.state="open",c.async&&!this.selectedRow.children){var g={};b.each(this.selectedRow,function(a,b){"children"!=a&&(g[a]=b)}),this.selectedRow.childrenList||b.ajax({type:"post",url:c.asyncUrl,success:function(a,b){f.selectedRow.children=a.rows},data:g,dataType:"JSON",async:!1})}}else this.selectedRow.state="closed";this._refreshBody()},d.prototype._checkbox=function(a){var c=b(a.target),d=b(a.target).closest("tr"),e=parseInt(d.data("rowid")),f=e,g=this._getRowDataById(e),h=c.prop("checked");!function(a){a.children&&a.children.length>0&&(f*=1e3,!function c(a){b.each(a,function(){f+=1,b("tr[data-rowid="+f+"] input[type=checkbox]").prop("checked",h),this.children&&this.children.length>0&&(f*=1e3,c(this.children),f=Math.floor(f/=1e3))})}(a.children))}(g)},d.prototype._getRowDataById=function(a){var b=(this.options,null);return a=parseInt(a),!function(c){for(var d=[];a>=1;){var e=a%1e3;d.push(e),a=Math.floor(a/1e3)}for(var f=d.length-1;f>=0;f--){var g=d[f]-1;c[g]&&(b=c[g])&&(c=c[g].children)}}(this._rows),b},b.fn.treegrid=function(a){
var c=null;return this.each(function(){var e=b(this),f="object"==typeof a&&a;c=e.data("treegrid"),c&&c.$grid.before(e).remove(),e.data("treegrid",c=new d(this,f))}),c}}(window),!function(a){"use strict";function b(a,b){return"string"==typeof b&&(b=new RegExp("^(?:"+b+")$")),b.test(a)}function c(a,c,d){var e=a.val();return a.filter(c).length&&""!==e?b(e,d):!0}function d(a,b){return a.length?null!=a[0].attributes[b]:!1}var e=a.cri,f=a.jQuery,g=":input:not(:button,[type=submit],[type=reset],[disabled])",h="[role=number],[role=range]",i=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,j=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,k=/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/i,l=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}$/i,m={required:function(a){var b=a.filter("[type=checkbox]").length&&!a.is(":checked"),c=a.val();return!(d(a,"required")&&(""===c||!c||b))},pattern:function(a){return a.filter("[role=text]").filter("[pattern]").length&&""!==a.val()?b(a.val(),a.attr("pattern")):!0},min:function(a){if(a.filter(h).filter("[min]").length&&""!==a.val()){var b=parseFloat(a.attr("min"))||0,c=parseFloat(a.val());return c>=b}return!0},max:function(a){if(a.filter(h).filter("[max]").length&&""!==a.val()){var b=parseFloat(a.attr("max"))||0,c=parseFloat(a.val());return b>=c}return!0},email:function(a){return c(a,"[role=email]",i)},url:function(a){return c(a,"[role=url]",j)},number:function(a){return a.filter(h).length&&a.val()?e.isNum(a.val()):!0},tel:function(a){return c(a,"[role=tel]",k)},ip:function(a){return c(a,"[role=ip]",l)}},n={required:"该值不能为空",min:"请输入大于的数字",max:"请输入小于的数字",email:"请输入有效的邮箱地址",url:"请输入有效的URL地址",number:"请输入数字",tel:"请输入有效的号码",pattern:"该值无效,请重新输入",ip:"请输入有效IP地址"},o={rules:m,messages:n,validateOnBlur:!1},p=e.Widgets.extend(function(a,b){this.options=o,e.Widgets.apply(this,arguments)});f.extend(p.prototype,{_eventListen:function(){var a=this,b=this.$element;this.$element.is("form")&&this.$element.on("submit",function(){a.validate()}),a.options.validateOnBlur&&(b.is(g)?b.on("blur",function(){a._validateInput(b)}):(b.find(g).each(function(){f(this).on("blur",function(){a._validateInput(f(this))}),f(this).is("[role=timeInput]")||f(this).on("blur",function(){a._validateInput(f(this))})}),b.find("select").each(function(){f(this).on("change",function(){a._validateInput(f(this))})})))},_checkValidity:function(a){var b,c=this.options.rules;for(b in c)if(!c[b].call(this,a))return{valid:!1,key:b};return{valid:!0}},validate:function(a){var b=this,c=a||this.$element,d=!0;return c.is(g)?d=d&&b._validateInput(c):c.find(g).each(function(){var a=b._validateInput(f(this));d=d&&a}),d},_validateInput:function(a){var b=this,c=this._checkValidity(a),d=c.valid;if(d)this._hideMessage(a);else{var e=this.options.messages[c.key];"min"==c.key&&(e="请输入不小于"+a.attr("min")+"的数字"),"max"==c.key&&(e="请输入不大于"+a.attr("max")+"的数字"),this._showMessage(a,e),a.is("[readonly=readonly]")&&a.closest(".input-group").one("click",function(){b._hideMessage(a)}),a.one("focus",function(){b._hideMessage(a)})}return d},_showMessage:function(a,b){b=b||a.attr("error-msg")||"请检查";var c=a.data("role");if(c){var d=a.data("widget");d&&d._showValidateMsg(b)}else{a.closest(".form-group").addClass("has-error");var e=a.next();e.is(".help-block")?e.text(b):(e=f('<span class="help-block">'+b+"</span>"),a.after(e)),e.show()}},_hideMessage:function(a){var b=a.data("role");if(b){var c=a.data("widget");c&&"function"==typeof c._hideValidateMsg&&c._hideValidateMsg()}else{a.closest(".form-group").removeClass(".has-error");var d=a.next();d.is(".help-block")&&d.hide()}},hideMessages:function(a){if(a)if(e.isArray(a))for(var b=0,c=a.length;c>b;b++)this._hideMessage(f("[name="+a[b]+"]"));else this._hideMessage(f("[name="+a+"]"));else f(".input-warm",this.$element).hide()}}),e.Validator=p,f.fn.validator=function(a){var b=null;return this.each(function(){var c=f(this),d="object"==typeof a&&a;b=c.data("validator"),c.data("validator",b=new p(this,d))}),b}}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d="window-head",e={Minimize:"fa fa-window-minimize",Maximize:"fa fa-window-maximize",Close:"fa fa-window-close-o",Resume:"fa fa-window-restore"},f=150,g=1e4,h={title:"",actions:["Close","Maximize"],content:null,isIframe:!1,visible:!1,modal:!1,width:600,height:400,position:{top:0,left:0},center:!0,resizable:!0,dragable:!0,onReady:null,onOpen:null,onClose:null,onMaximize:null,onMinimize:null,onResume:null},i=b.Widgets.extend(function(a,c){this.options=h,this.windowStatus="normal",this.contentLoader=null,this.$elementPlaceHolder=null,this.options.center&&(this.options.position={left:"50%",top:"50%"}),b.Widgets.apply(this,arguments),this.windowStack.push(this),this.toFront(),this.$element.attr("data-role","window"),this.options.visible||this.$window.hide()});c.extend(i.prototype,{windowStack:[],mask:null,_initOptions:function(a){this.options=c.extend(!0,{},this.options,a),a.actions&&a.actions.length&&(this.options.actions=a.actions)},_eventListen:function(){var a=this;this.options.dragable&&this.$window.on("mousedown",".window-head",function(b){var d=+a._$panel.css("left").split("px")[0],e=+a._$panel.css("top").split("px")[0],f=+a._$panel.width(),g=+a._$panel.height(),h=b.pageX,i=b.pageY;c(document).on("mousemove",function(b){var c=b.pageX,j=b.pageY,k=c-h,l=j-i;d+=k,e+=l,h=c,i=j,a._setPosition({top:e,left:d,width:f,height:g})})}),this.$window.on("click",".action",function(){var b=a._actionForButton(c(this));return b&&"function"==typeof a[b]&&a[b](),!1}).on("click",".window-head",function(){a.toFront()}).on("mousedown",".window-resizer",function(b){var d=+a._$panel.css("left").split("px")[0],e=+a._$panel.css("top").split("px")[0],f=+a._$panel.width(),g=+a._$panel.height(),h=b.pageX,i=b.pageY,j=/[ewsn]+$/.exec(this.className)[0];c(document).on("mousemove",function(b){var c=b.pageX,k=b.pageY,l=c-h,m=k-i;h=c,i=k,j.indexOf("e")>=0&&(f+=l),j.indexOf("w")>=0&&(d=c,f-=l),j.indexOf("n")>=0&&(e=k,g-=m),j.indexOf("s")>=0&&(g+=m),a._setPosition({top:e,left:d,width:f,height:g})})}),c(document).on("mouseup",function(){c(document).off("mousemove")})},_init:function(){var a=this.options;this._createWindow(),a.resizable&&this._createResizeHandler(),this.$elementPlaceHolder.after(this.$window),a.visible?this.$window.show():this.$window.hide(),this.$element.show()},_createWindow:function(){var a=this.options,b=this.$window=c('<div class="window"></div>');a.modal?(b.addClass("modal-window"),this._$panel=c('<div class="panel panel-default"></div>'),b.append(this._$panel)):this._$panel=this.$window.addClass("panel panel-default"),a.center&&b.addClass("center"),this._createWindowHead(),this._createWindowBody(),this.load(this.options.content)},_createWindowHead:function(){var a=c('<div class="'+d+' panel-heading"></div>');a.append(this._createTitle()).append(this._createActions()),this._$panel.prepend(a),this.$windowHead=a},_createWindowBody:function(){var a=this.options,b=this.$element,d=c('<div class="window-content"></div>'),e=this.$elementPlaceHolder=c('<div style="display:none"></div>');b.after(e),b.detach(),this._setPosition({top:a.position.top,left:a.position.left,width:a.width,height:a.height}),this._$panel.append(d.append(b))},_createTitle:function(){var a=this.options.title||"";return c("<span></span>").addClass("title").text(a)},_createActions:function(){for(var a=this.options,b=c("<div></div>").addClass("actions"),d=a.modal?["Maximize","Close"]:["Maximize","Close"],f=0,g=d.length;g>f;f++)for(var h=d[f],i=0,j=a.actions.length;j>i;i++){var k=a.actions[i];if(k==h){var l=c('<span class="action"></span>').addClass(k.toLowerCase()),m=c('<i class="'+e[k]+'"></i>');b.append(l),l.append(m)}}return b},_createResizeHandler:function(){var a=[],b="n e s w nw ne se sw";c.each(b.split(" "),function(b,c){a.push('<div class="window-resizer window-resizer-'+c+'" style="display: block;"></div>')}),this._$panel.append(a.join(""))},_setPosition:function(a){this._$panel.css(a),this.options.position=a},_actionForButton:function(a){var b=/\baction \w+\b/.exec(a[0].className)[0];return{"action minimize":"minimize","action maximize":"maximize","action resume":"resume","action close":"close"}[b]},_setStyleByStatus:function(a){var b=this.options,c=b.position,d={minimize:"mini-window",maximize:"maxi-window",closed:"",normal:""},e={width:b.width,height:b.height,left:c.left,top:c.top,bottom:"auto",right:"auto"};this.$window.removeClass("mini-window").removeClass("maxi-window").addClass(d[a]),this._$panel.css(e)},_setButtons:function(a){var b={minimize:["resume","close"],maximize:["resume","close"],normal:["minimize","maximize","close"]},d=c(".actions",this.$window);if(c(".action",d).hide(),"minimize"==a){var f=c(".maximize",d).removeClass("maximize").addClass("resume");c("i",f).prop("class",e.Maximize)}if("maximize"==a){var f=c(".maximize",d).removeClass("maximize").addClass("resume");c("i",f).prop("class",e.Resume)}if("normal"==a){var f=c(".resume",d).removeClass("resume").addClass("maximize");c("i",f).prop("class",e.Maximize)}c.each(b[a],function(a,b){c("."+b,d).show()})},_moveLeft:function(a){this.$window.css("left",f*a)},_destroy:function(){var a=this.$element.hide(),b=a.parents(".window"),c=this.windowStack.indexOf(this);c>=0&&this.windowStack.splice(c,1),b.after(a),b.remove(),a.hide(),a.data("window",null)},open:function(){this._setStyleByStatus("normal"),this.toFront(),this.windowStatus="normal",this.$window.show(),this.options.onOpen&&this.options.onOpen.call(this)},close:function(){this.options.onClose&&this.options.onClose.call(this),this.$window.hide()},maximize:function(){this._setStyleByStatus("maximize"),this._setButtons("maximize"),this.windowStatus="maximize",this.options.onMaxmize&&this.options.onMaxmize.call(this)},minimize:function(){this._setButtons("minimize"),c(".window-content",this.$window).hide();var a=c(".mini-window").size()*f;this._setStyleByStatus("minimize"),this.$window.css("left",a),this.windowStatus="minimize",this.options.onMinimize&&this.options.onMinimize.call(this)},resume:function(){if(this._setButtons("normal"),this._setStyleByStatus("normal"),c(".window-content",this.$window).show(),"minimize"==this.windowStatus){var a=0;this.windowStatus="normal",c.each(i.prototype.windowStack,function(b,c){"minimize"==c.windowStatus&&c._moveLeft(a++)})}this.windowStatus="normal",this.options.onResume&&this.options.onResume.call(this)},toFront:function(){var a=this.windowStack,b=a.indexOf(this);a.splice(b,1),a.push(this);for(var c=a.length,d=c-1;d>=0;d--){if(a[d].options.modal){for(var e=0;c>e;e++)d>e?a[e].$window.css("zIndex",g+e):a[e].$window.css("zIndex",g+e+1);break}a[d].$window.css("zIndex",g+d)}},load:function(a){var d=this.$element,e=this,f=this.options,g=c('<i class="fa fa-spinner fa-spin"></i>').addClass("loadingIcon");a?(d.empty(),d.addClass("loading").html(g),this.contentLoader=new b.ContentLoader(d,{content:a,isIframe:f.isIframe,onReady:function(){d.removeClass("loading"),g.remove(),f.onReady&&f.onReady.call(e,e.$window)}})):f.onReady&&f.onReady.call(e,e.$window)}}),b.Window=i,c.fn.window=function(a){var b=null;return this.each(function(){var d=c(this),e=d.data("window"),f="object"==typeof a&&a;null!=e&&(e._destory(),d.data("window",null)),d.data("window",b=new i(this,f))}),b}}(window);